"use strict";(self.webpackChunkchat_ui=self.webpackChunkchat_ui||[]).push([[465],{1465:(I,C,i)=>{i.r(C),i.d(C,{ChatlistComponent:()=>g});var p=i(6895),m=i(4859),c=i(7392),S=i(8350),s=i(9646),E=i(9300),x=i(3900),O=i(3780),y=i(1135),L=i(8505),D=i(4351),k=i(8746);class u{constructor(){this.loadingSubject=new y.X(!1),this.loading$=this.loadingSubject.asObservable()}showLoaderUntilCompleted(f){return(0,s.of)(null).pipe((0,L.b)(()=>this.loadingOn()),(0,D.b)(()=>f),(0,k.x)(()=>this.loadingOff()))}loadingOn(){this.loadingSubject.next(!0)}loadingOff(){this.loadingSubject.next(!1)}}var _=i(1572),n=i(4650);function A(o,f){if(1&o&&(n.TgZ(0,"div",1),n._UZ(1,"mat-spinner",2),n.qZA()),2&o){const a=n.oxw();n.xp6(1),n.Q6J("diameter",a.diameter)}}let h=(()=>{class o{constructor(){this.diameter="100",this.isLoading=(0,s.of)(!0)}ngOnInit(){}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-loading-spiner"]],inputs:{diameter:"diameter",isLoading:"isLoading"},standalone:!0,features:[n.jDz],decls:2,vars:3,consts:[["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[3,"diameter"]],template:function(a,v){1&a&&(n.YNc(0,A,2,1,"div",0),n.ALo(1,"async")),2&a&&n.Q6J("ngIf",n.lcZ(1,1,v.isLoading))},dependencies:[p.ez,p.O5,p.Ov,_.Cq,_.Ou],styles:[".spinner-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:grid;place-items:center}"]}),o})();var T=i(4285),r=i(5526);function t(o,f){1&o&&(n.TgZ(0,"div")(1,"div",2),n._UZ(2,"img",3),n.qZA()())}const e=function(o,f){return["/home/message",o,f]};function d(o,f){if(1&o&&(n.TgZ(0,"li",7)(1,"div",8)(2,"button",9)(3,"mat-icon",10),n._uU(4,"account_circle"),n.qZA(),n._uU(5),n.qZA()()()),2&o){const a=f.$implicit;n.xp6(1),n.Q6J("routerLink",n.WLB(3,e,a.uid,a.roomId))("routerLinkActive","list-item-active"),n.xp6(4),n.hij(" ",a.displayName," ")}}function l(o,f){if(1&o&&(n._UZ(0,"app-loading-spiner",4),n.TgZ(1,"ul",5),n.YNc(2,d,6,6,"li",6),n.ALo(3,"async"),n.qZA()),2&o){const a=n.oxw();n.Q6J("isLoading",a.loader.loading$),n.xp6(2),n.Q6J("ngForOf",n.lcZ(3,2,a.peoples$))}}let g=(()=>{class o{constructor(a,v,M){this._route=a,this.appState=v,this.db=M,this.renderInAside=!1,this.peoples$=(0,s.of)([]),this.loader=new u}ngOnInit(){!this.renderInAside&&this.appState.isViewPortLarge||this.appState.userDocID&&(this.peoples$=this.appState.reloadRequired$.pipe((0,E.h)(a=>null===a||a===O.S.CHAT_LIST),(0,x.w)(a=>this.appState.userDocID?this.loader.showLoaderUntilCompleted(this.db.getFriendsList(this.appState.userDocID)):(0,s.of)([]))))}message(a){this._route.navigate(["message",a])}}return o.\u0275fac=function(a){return new(a||o)(n.Y36(S.F0),n.Y36(T.Z),n.Y36(r.d))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-chatlist"]],inputs:{renderInAside:"renderInAside"},standalone:!0,features:[n.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"image-container"],["src","/assets/undraw_quick_chat_re_bit5.svg","alt","","srcset",""],["diameter","50",3,"isLoading"],[1,"list-items"],["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[1,"list-item-link",3,"routerLink","routerLinkActive"],["mat-button","",1,"list-item-box"],["mat-list-icon",""]],template:function(a,v){if(1&a&&(n.YNc(0,t,3,0,"div",0),n.YNc(1,l,4,4,"ng-template",null,1,n.W1O)),2&a){const M=n.MAs(2);n.Q6J("ngIf",!v.renderInAside&&v.appState.isViewPortLarge)("ngIfElse",M)}},dependencies:[p.ez,p.sg,p.O5,p.Ov,S.Bz,S.rH,S.Od,c.Ps,c.Hw,m.ot,m.lW,h],styles:[".list-items[_ngcontent-%COMP%]{width:100%;padding:0}.list-item[_ngcontent-%COMP%]{list-style:none}.list-item-link[_ngcontent-%COMP%]{text-decoration:none}.darkMode[_ngcontent-%COMP%]   .list-item-link[_ngcontent-%COMP%]{color:#fff}.list-item-box[_ngcontent-%COMP%]{width:100%;height:inherit;display:flex;align-items:center;padding:.5em 1em}.list-item-box[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{width:100%}.list-item-active[_ngcontent-%COMP%]   .list-item-box[_ngcontent-%COMP%]{background-color:#a8bdaa68}.image-container[_ngcontent-%COMP%]{width:100%;display:grid;place-items:center;height:calc(100vh - 16px)}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}"]}),o})()},3780:(I,C,i)=>{i.d(C,{S:()=>m,c:()=>p});var p=(()=>{return(c=p||(p={}))[c.PENDING=1]="PENDING",c[c.ACCEPTED=2]="ACCEPTED",c[c.REJECTED=3]="REJECTED",c[c.CANCELED=4]="CANCELED",p;var c})(),m=(()=>{return(c=m||(m={}))[c.CHAT_LIST=1]="CHAT_LIST",c[c.CHAT_DETAIL=2]="CHAT_DETAIL",m;var c})()},5526:(I,C,i)=>{i.d(C,{d:()=>A});var p=i(5861),m=i(9226),c=i(8505),S=i(3099),s=i(9646),E=i(4004),x=i(4482),O=i(5403),y=i(4671),L=i(5963),D=i(8421);function k(h=1/0){let T;T=h&&"object"==typeof h?h:{count:h};const{count:r=1/0,delay:t,resetOnSuccess:e=!1}=T;return r<=0?y.y:(0,x.e)((d,l)=>{let o,g=0;const f=()=>{let a=!1;o=d.subscribe((0,O.x)(l,v=>{e&&(g=0),l.next(v)},void 0,v=>{if(g++<r){const M=()=>{o?(o.unsubscribe(),o=null,f()):a=!0};if(null!=t){const N="number"==typeof t?(0,L.H)(t):(0,D.Xf)(t(v,g)),P=(0,O.x)(l,()=>{P.unsubscribe(),M()},()=>{l.complete()});N.subscribe(P)}else M()}else l.error(v)})),a&&(o.unsubscribe(),o=null,f())};f()})}var u=i(2340),_=i(4650),n=i(529);let A=(()=>{class h{constructor(r,t){this.fireStore=r,this.http=t,this.userCollection=null,this.userCollection=(0,m.hJ)(this.fireStore,"user")}userExits(r){var t=this;return(0,p.Z)(function*(){const e=(0,m.IO)(t.userCollection,(0,m.ar)("uid","==",r.uid)),d=yield(0,m.PL)(e);return 1==d.size?d.docs[0].id:null})()}getUserWithDocId(r){return this.http.get(`${u.N.api}/get-user/${r}`).pipe((0,c.b)(t=>{console.log(t)}))}getMessages(r,t=10,e=0){return this.http.get(`${u.N.api}/get-messages/${r}?limit=${t}&offset=${e}`)}getMessageSnapShort(r,t){const e=(0,m.IO)((0,m.hJ)(this.fireStore,"/message_room/rooms/"+r),(0,m.Xo)("createdAt","desc"));return(0,m.cf)(e,{next:d=>{console.log(d),t(d.docs.map(l=>l.data()))}})}sendMessage(r,t){return(0,m.ET)((0,m.hJ)(this.fireStore,"/message_room/rooms/"+t),{...r,createdAt:(0,m.Bt)()})}addUser(r){return this.http.post(`${u.N.api}/save-or-crate-user`,r)}getFriendsList(r){return this.http.get(`${u.N.api}/get-add-friends/${r}`).pipe((0,S.B)())}getUserList(r,t,e=100,d=0){return r?this.http.get(`${u.N.api}/get-users/${r}?q=${t}&limit=${e}&offset=${d}`).pipe((0,E.U)(l=>l.results)):(0,s.of)([])}getAllFriends(r,t,e=100,d=0){return r?this.http.get(`${u.N.api}/get-all-friends/${r}?q=${t}&limit=${e}&offset=${d}`).pipe((0,E.U)(l=>l.results)):(0,s.of)([])}getAllFriendRequest(r,t,e=100,d=0){return r?this.http.get(`${u.N.api}/get-all-friend-request/${r}?q=${t}&limit=${e}&offset=${d}`).pipe((0,E.U)(l=>l.results)):(0,s.of)([])}addFriends(r,t){return this.http.post(`${u.N.api}/add-friends`,{uid_first:r,uid_second:t}).pipe(k(2),(0,c.b)(e=>{console.log(e)}))}removeFriends(r,t){return this.http.post(`${u.N.api}/remove-friends`,{uid_first:r,uid_second:t}).pipe(k(2),(0,c.b)(e=>{console.log(e)}))}acceptFriends(r,t){return this.http.post(`${u.N.api}/accept-friends`,{uid_first:r,uid_second:t}).pipe(k(2),(0,c.b)(e=>{console.log(e)}))}}return h.\u0275fac=function(r){return new(r||h)(_.LFG(m.gg),_.LFG(n.eN))},h.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},1572:(I,C,i)=>{i.d(C,{Cq:()=>h,Ou:()=>A});var p=i(1281),m=i(3353),c=i(8605),S=i(6895),s=i(4650),E=i(3238),x=i(727);function O(r,t){if(1&r&&(s.O4$(),s._UZ(0,"circle",4)),2&r){const e=s.oxw(),d=s.MAs(1);s.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(d)),s.uIk("r",e._getCircleRadius())}}function y(r,t){if(1&r&&(s.O4$(),s._UZ(0,"circle",4)),2&r){const e=s.oxw(),d=s.MAs(1);s.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(d)),s.uIk("r",e._getCircleRadius())}}const k=(0,E.pj)(class{constructor(r){this._elementRef=r}},"primary"),u=new s.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function _(){return{diameter:100}}});class A extends k{constructor(t,e,d,l,g,o,f,a){super(t),this._document=d,this._diameter=100,this._value=0,this._resizeSubscription=x.w0.EMPTY,this.mode="determinate";const v=A._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),v.has(d.head)||v.set(d.head,new Set([100])),this._noopAnimations="NoopAnimations"===l&&!!g&&!g._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),g&&(g.color&&(this.color=this.defaultColor=g.color),g.diameter&&(this.diameter=g.diameter),g.strokeWidth&&(this.strokeWidth=g.strokeWidth)),e.isBrowser&&e.SAFARI&&f&&o&&a&&(this._resizeSubscription=f.change(150).subscribe(()=>{"indeterminate"===this.mode&&a.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=(0,p.su)(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=(0,p.su)(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,(0,p.su)(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=(0,m.kV)(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,d=A._diameters;let l=d.get(t);if(!l||!l.has(e)){const g=this._document.createElement("style");g.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),g.textContent=this._getAnimationText(),t.appendChild(g),l||(l=new Set,d.set(t,l)),l.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}A._diameters=new WeakMap,A.\u0275fac=function(t){return new(t||A)(s.Y36(s.SBq),s.Y36(m.t4),s.Y36(S.K0,8),s.Y36(s.QbO,8),s.Y36(u),s.Y36(s.sBO),s.Y36(c.rL),s.Y36(s.R0b))},A.\u0275cmp=s.Xpm({type:A,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(s.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[s.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",0,1),s.YNc(2,O,1,11,"circle",2),s.YNc(3,y,1,9,"circle",3),s.qZA()),2&t&&(s.Udp("width",e.diameter,"px")("height",e.diameter,"px"),s.Q6J("ngSwitch","indeterminate"===e.mode),s.uIk("viewBox",e._getViewBox()),s.xp6(2),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngSwitchCase",!1))},dependencies:[S.RF,S.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let h=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[E.BQ,S.ez,E.BQ]}),r})()}}]);